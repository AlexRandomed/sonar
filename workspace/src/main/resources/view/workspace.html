<!DOCTYPE html>
<html class="app" data-ng-app="one">
	<head>
		<title>{{#i18n}}workspace.title{{/i18n}}</title>
		<meta charset="utf-8" />
		<script src="{{#infra}}js/moment+langs.js{{/infra}}" type="text/javascript"></script>
		<script src="{{#infra}}js/jquery-1.9.1.js{{/infra}}" type="text/javascript" id="context"></script>
		<script src="{{#infra}}js/angular.min.js{{/infra}}" type="text/javascript"></script>
		<script src="{{#infra}}js/angular-sanitize-1.0.1.js{{/infra}}" type="text/javascript"></script>
		<script src="{{#infra}}js/underscore-min-1.4.4.js{{/infra}}" type="text/javascript"></script>
		<script src="{{#infra}}js/mustache.js{{/infra}}" type="text/javascript"></script>
		<script src="{{#infra}}js/humane.min.js{{/infra}}" type="text/javascript"></script>
		<script src="{{#infra}}js/one-app.js{{/infra}}" type="text/javascript"></script>
		<script src="{{#infra}}js/one.js{{/infra}}" type="text/javascript"></script>
		<script src="{{#infra}}js/ui.js{{/infra}}" type="text/javascript"></script>
		<script src="{{#static}}js/workspace.js{{/static}}" type="text/javascript"></script>


		<script type="text/javascript" src="{{#infra}}js/iframe.js{{/infra}}"></script>
		<script type="text/ng-template" id="folder-content">
			<a data-ng-class="{ selected: openedFolder.folder === value }" data-ng-click="openFolder(value, key)">[[translate(key)]]</a>
			<ul data-ng-class="{ selected: containsCurrentFolder(value), closed: !containsCurrentFolder(value) }">
				<li data-ng-repeat="(key, value) in value"
					data-ng-include="'folder-content'"
				></li>
			</ul>
		</script>
	</head>
	<body data-ng-controller="Workspace">
		<div class="row">
			<section class="four cell">
				<h1><i role="storage"></i>{{#i18n}}workspace.header{{/i18n}}</h1>
				<nav class="vertical" ng-init="value=folders">
					<ul data-ng-include="'folder-content'"></ul>
				</nav>
			</section>
			<section class="eight cell">
				<nav class="contextual-buttons row">
					<div class="action-buttons">
						<button
								ng-repeat="button in currentTree.buttons"
								ng-disabled="button.contextual && selectedDocuments().length === 0"
								ng-click="button.action()">
							<i role="add" ng-if="button.icon"></i> [[translate(button.text)]]
						</button>
					</div>
					<div class="display-buttons">
						<i role="show-list"
						   ng-class="{ selected: currentViews.documents === views.documents.list }"
						   ng-click="switchView('documents', 'list')"></i>
						<i role="show-icons"
							ng-class="{ selected: currentViews.documents === views.documents.icons }"
							ng-click="switchView('documents', 'icons')"></i>
					</div>
				</nav>
				<section class="lightbox-window">
					<div class="twelve cell" ng-include="currentViews.lightbox"></div>
					<div class="close-lightbox">
						<i role="close-2x"></i>
					</div>
					<div class="clear"></div>
				</section>
				<article data-ng-include="currentViews.documents" class="row"></article>
			</section>
		</div>
		<section class="lightbox-backdrop"></section>
		<div class="row" id="main">
			<section class="four cell">
				<a href="" call="refresh"><h1><i role="storage"></i>{{#i18n}}workspace.header{{/i18n}}</h1></a>
				<nav class="vertical">
					<ul>
						<li>
							<a call="documents" href="documents?hierarchical=true&filter=owner">{{#i18n}}workspace.documents{{/i18n}}</a>
							<ul data-folder="undefined" data-filter="owner">
							</ul>
						</li><li>
							<a href="documents?hierarchical=true&filter=shared" call="documents">{{#i18n}}workspace.shared.documents{{/i18n}}</a>
							<ul data-folder="undefined" data-filter="shared">
							</ul>
						</li><li>
							<a call="rack" href="rack/documents">{{#i18n}}workspace.rack{{/i18n}}</a></li><li>
							<a call="trash" href="documents/Trash?hierarchical=true&filter=owner">{{#i18n}}workspace.trash{{/i18n}}</a>
						</li>
					</ul>
				</nav>
			</section>
			<section class="eight cell list-view list">
				<nav class="contextual-buttons row">
					<div class="action-buttons">
					</div>
					<div class="display-buttons">
						<i call="listView" role="show-list" class="selected"></i>
						<i call="iconsView" role="show-icons"></i>
					</div>
				</nav>
				<div class="workspace row">
					<div class="mod">
						<article id="list">

						</article>
					</div>
				</div>
			</section>
		</div>
		<div class="clear"></div>
	</body>
</html>
