<!DOCTYPE html>
<html>
	<head>
		<title>{{#i18n}}timeline.title{{/i18n}}</title>
		<meta charset="utf-8" />
		<script src="{{#static}}js/model.js{{/static}}" type="text/javascript"></script>
		<script src="{{#infra}}js/one-loader.js{{/infra}}" type="text/javascript" id="context"></script>

		<script src="{{#static}}js/controller.js{{/static}}" type="text/javascript"></script>
	</head>
	<body ng-controller="MainController" ng-click="closePanel()">
		<portal>
			<div class="row">
				<div class="three cell block-container" ng-controller="Widgets">
					<div class="row" ng-repeat="widget in widgets.all">
						<div class="twelve cell" ng-include="widget.path"></div>
					</div>
				</div>
				<div class="nine cell">
						<h1><a data-reload><i role="notification"></i>{{#i18n}}timeline.title{{/i18n}}</a></h1>
						<article data-ng-controller="Timeline" class="twelve cell">
							<div class="row line filters">
								<ul>
									<li class="legend" translate key="filters.title"></li>

									<li ng-repeat="type in notificationTypes.all" ng-click="type.apply()">
										<i role="[[type.data.toLowerCase()]]"></i>[[translate(type.data.toLowerCase())]]
									</li>
									<li ng-click="removeFilter()">
										<i role="apps"></i>[[translate('filters.all')]]
									</li>
								</ul>
							</div>
							<div data-ng-repeat="notification in notifications.all" class="row line">

								<div ng-class="{
									twelve: true,
									cell: true,
									'mini-block-container': true,
									'unread': isUnRead(notification)
								}">
									<div class="row">
										<div class="cell nine">
											<div class="row">
												<div class="one cell fixed-block height-one">
													<div class="fixed twelve cell">
														<div class="fluid twelve cell clip">
															<img ng-src="/userbook/avatar/[[notification.sender]]?thumbnail=50x50" />
														</div>
													</div>
												</div>
												<div class="eleven cell horizontal-spacing">
													<p data-ng-bind-html="notification.message"></p>
												</div>
											</div>
										</div>
										<div class="cell right-magnet three">
											<em class="low-importance">[[formatDate(notification.date.$date)]]</em>
										</div>
									</div>

								</div>
								<div class="clear"></div>
							</div>
						</article>
					</div>
				</div>
			</div>
			<div ng-controller="Personalization">
				<div ng-class="{ 'toggle-panel': true, hide: !showPanel }">
					<div class="toggle cell">
						<h1>{{#i18n}}panel.title{{/i18n}}</h1>
						<div class="row">
							<div class="twelve cell">
								<h2>{{#i18n}}panel.themes{{/i18n}}</h2>
								<div class="twelve cell">
									<ul class="list icons-view two-cols">
										<li ng-repeat="skin in skins.all" ng-click="saveTheme(skin, $event)" class="element">
											<div class="photo-preview">
												<img ng-src="[[skin.skinPath]]thumbnail.png" />
											</div>
											<a>[[skin.displayName]]</a>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
				<ul class="icons-tabs">
					<li ng-click="togglePanel($event)" ng-class="{ active: showPanel }"><i role="tools"></i></li>
				</ul>

			</div>

		</portal>

	</body>
</html>
