(function(){var a=model.widgets.findWidget("birthday");a.classes=[];a.currentClass="";a.emptyList="";a.getDay=function(b){return moment(b).date()};a.getMonth=function(b){return moment(b).format("MMMM")};a.birthdaysInClass=function(){return _.filter(a.birthdays,function(b){return b.classes.indexOf(a.currentClass)!==-1})};a.saveDefaultClass=function(){http().get("/userbook/api/edit-userbook-info?prop=userPreferencesBirthdayClass&value="+a.currentClass)};http().get("/userbook/user-preferences").done(function(b){a.currentClass=b.result[0].userPreferencesBirthdayClass;if(a.classes.indexOf(a.currentClass)===-1&&a.currentClass!==""){a.classes.push(a.currentClass)}model.widgets.apply()});http().get("/userbook/person/birthday").done(function(b){lang.addBundle("/directory/i18n",function(){a.emptyList=lang.translate("nobirthday");a.birthdays=_.filter(b,function(d){return moment(d.birthDate).month()===moment().month()});a.birthdays=a.birthdays.sort(function(e,d){return moment(e.birthDate).date()-moment(d.birthDate).date()});var c=[];c=_.pluck(a.birthdays,"classes");c.forEach(function(d){d.forEach(function(e){if(a.classes.indexOf(e)===-1){a.classes.push(e)}})});if(!a.currentClass){a.currentClass=a.classes[0]}model.widgets.apply()})})}());