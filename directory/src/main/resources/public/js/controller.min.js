routes.define(function(a){a.when("/search",{action:"directory"}).when("/myClass",{action:"myClass"}).when("/user-view/:userId",{action:"viewUser"}).when("/:userId",{action:"viewUser"}).otherwise({redirectTo:"/myClass"})});function Directory(b,a){b.users=Model.users;b.lang=lang;b.search={text:"",field:"",maxLength:15,clear:function(){this.text="";this.field=""}};b.increaseSearchSize=function(){b.search.maxLength+=15;if(!b.$$phase){b.$apply("search")}};b.viewsContainers={};b.openView=function(d,e){b.search.maxLength=15;var f="/directory/public/template/";b.viewsContainers[e]=f+d+".html"};b.containsView=function(e,d){var f="/directory/public/template/";return b.viewsContainers[e]===f+d+".html"};b.openView("class","page");b.openView("user-infos","details");a({viewUser:function(d){Model.users.deselectAll();new User({id:d.userId}).select();b.openView("profile","page");b.title="profile"},directory:function(){Model.users.all=[];b.openView("directory","page");b.viewsContainers.main="empty";b.title="directory"},myClass:function(){b.openView("class","page");Model.users.loadClass();b.title="class"}});b.searchDirectory=function(){Model.users.all=[];Model.users.searchDirectory(b.search.field);b.openView("list-view","main")};b.selectFirstUser=function(){b.selectUser(Model.users.first())};b.deselectUser=function(){Model.users.current.deselect();b.openView("list-view","main")};b.selectUser=function(d){if(!b.$$phase){b.$apply("search")}if(b.containsView("main","user-selected")){ui.scrollToTop()}else{window.scrollTo(0,200)}Model.users.deselectAll();d.select();b.openView("user-selected","main")};var c={relative:"cyan",teacher:"green",student:"orange"};b.colorFromType=function(d){return c[d.toLowerCase()]};Model.on("users.change",function(d){if(!b.$$phase){b.$apply("users")}});b.openView("list-view","main")};