routes.define(function(b){b.when("/search",{action:"directory"}).when("/myClass",{action:"myClass"}).when("/user-view/:userId",{action:"viewUser"}).when("/:userId",{action:"viewUser"}).otherwise({redirectTo:"/myClass"})});function Directory(d,e){d.users=Model.users;d.lang=lang;d.search={text:"",field:"",maxLength:15,clear:function(){this.text="";this.field=""}};d.increaseSearchSize=function(){d.search.maxLength+=15;d.$apply("search")};d.viewsContainers={};d.openView=function(c,b){d.search.maxLength=15;var a="/directory/public/template/";d.viewsContainers[b]=a+c+".html"};d.containsView=function(b,c){var a="/directory/public/template/";return d.viewsContainers[b]===a+c+".html"};d.openView("class","page");d.openView("user-infos","details");e({viewUser:function(a){Model.users.deselectAll();new User({id:a.userId}).select();d.openView("profile","page")},directory:function(){d.openView("directory","page");d.openView("","main")},myClass:function(){Model.users.loadClass()}});d.searchDirectory=function(){Model.users.all=[];Model.users.searchDirectory(d.search.field);d.openView("list-view","main")};d.selectFirstUser=function(){d.selectUser(Model.users.first())};d.deselectUser=function(){Model.users.current.deselect();d.openView("list-view","main")};d.selectUser=function(a){d.$apply("search");if(d.containsView("main","user-selected")){ui.scrollToTop()}else{window.scrollTo(0,200)}Model.users.deselectAll();a.select();d.openView("user-selected","main")};var f={relative:"cyan",teacher:"green",student:"orange"};d.colorFromType=function(a){return f[a.toLowerCase()]};Model.on("users.change",function(a){d.$apply("users")});d.openView("list-view","main")};