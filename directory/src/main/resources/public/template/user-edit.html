<!--
 ~	Copyright © WebServices pour l'Éducation, 2014
 ~
 ~ This file is part of ENT Core. ENT Core is a versatile ENT engine based on the JVM.
 ~
 ~ This program is free software; you can redistribute it and/or modify
 ~ it under the terms of the GNU Affero General Public License as
 ~ published by the Free Software Foundation (version 3 of the License).
 ~
 ~ For the sake of explanation, any module that communicate over native
 ~ Web protocols, such as HTTP, with ENT Core is outside the scope of this
 ~ license and could be license under its own terms. This is merely considered
 ~ normal use of ENT Core, and does not fall under the heading of "covered work".
 ~
 ~ This program is distributed in the hope that it will be useful,
 ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
 ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 ~
 -->

<div class="cell four height-four reduce-block-six">
	<div class="fluid twelve cell clip" ng-if="account.edit.userbook">
		<image-select ng-model="account.picture" default="/img/illustrations/no-avatar.jpg" thumbnails="[{ width: 381, height: 381 }]" ng-change="saveChanges()"></image-select>
	</div>
	<div class="fluid cell twelve" ng-if="!account.edit.userbook">
		<img ng-src="[[account.picture]]?thumbnail=290x290" ng-if="account.picture" class="absolute" />
		<img skin-src="/img/illustrations/no-avatar.jpg" ng-if="!account.picture" class="absolute" />
	</div>
</div>
<div class="margin-four height-four reduce-block-six user-infos">
	<article class="fluid cell twelve small-text">
		<h2>[[account.displayName]]</h2>
		<div class="row">
			<label translate content="userBook.profile.login" class="four cell"></label>
			<em class="seven cell">[[account.login]]</em>
		</div>
		<div class="row" ng-if="account.id === me.userId">
			<label translate content="userBook.profile.password" class="four cell"></label>
			<em class="eight cell">
				<a data-ng-click="openPasswordDialog()" translate content="change.password"></a>
			</em>
		</div>
		<div class="row">
			<label translate content="userBook.profile.firstName" class="four cell"></label>
			<input class="seven cell inline-editing" type="text" ng-model="account.firstName" complete-change="saveChanges()" />
		</div>
		<div class="row">
			<label translate content="userBook.profile.lastName" class="four cell"></label>
			<input class="seven cell inline-editing" type="text" ng-model="account.lastName" complete-change="saveChanges()" />
		</div>
		<div class="row">
			<label translate content="userBook.profile.displayName" class="four cell"></label>
			<input class="seven cell inline-editing" type="text" ng-model="account.displayName" complete-change="saveChanges()" />
		</div>
		<div class="row">
			<label translate content="userBook.profile.email" class="four cell"></label>
			<input type="text" class="seven cell inline-editing" complete-change="saveChanges()" ng-model="account.email" />
			<i class="[[account.visible.email]] right-magnet" title="[[translate(account.visible.email)]]" data-ng-click="changeInfosVisibility('email', account.visible.email)"></i>
			<div class="clear"></div>
		</div>
		<div class="row" ng-if="account.type !== 'Student'">
			<label translate content="userBook.profile.telephone" class="four cell"></label>
			<input type="text" class="seven cell inline-editing" complete-change="saveChanges()" ng-model="account.homePhone" />
			<i class="[[account.visible.phone]] right-magnet" title="[[translate(account.visible.phone)]]" data-ng-click="changeInfosVisibility('phone', account.visible.phone)"></i>
			<div class="clear"></div>
		</div>
		<div class="row">
			<label translate content="userBook.profile.address" class="four cell"></label>
			<input type="text" class="seven cell inline-editing" complete-change="saveChanges()" ng-model="account.address" />
			<i class="[[account.visible.mail]] right-magnet" title="[[translate(account.visible.mail)]]" data-ng-click="changeInfosVisibility('mail', account.visible.mail)"></i>
			<div class="clear"></div>
		</div>
		<div class="row">
			<label translate content="userBook.profile.birthdate" class="four cell"></label>
			<date-picker
					ng-if="account.type.indexOf('Student') !== -1"
					ng-model="account.birthDate"
					ng-change="saveChanges()"
					class="inline-editing seven">
			</date-picker>
			<em class="seven cell" ng-if="account.type.indexOf('Student') === -1">[[longDate(account.birthDate)]]</em>
			<i class="[[account.visible.birthdate]] right-magnet" title="[[translate(account.visible.birthdate)]]" data-ng-click="changeInfosVisibility('birthdate', account.visible.birthdate)"></i>
			<div class="clear"></div>
		</div>
		<div class="row">
			<div class="four cell"><label translate content="userBook.profile.school"></label></div>
			<em class="six cell reduce-block-four">[[account.schoolName]]</em>
		</div>
	</article>
</div>
