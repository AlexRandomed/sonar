<!DOCTYPE html>
<html class="app" data-ng-app="one">
	<head>
		<title>{{#i18n}}blog.title{{/i18n}}</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<script src="{{#infra}}js/one-loader.js{{/infra}}" type="text/javascript" id="context"></script>
		<script src="{{#static}}js/blog.js{{/static}}" type="text/javascript"></script>
	</head>
	<body data-ng-controller="Blog">
		<div class="four cell">
			<a data-ng-click="displayLastPosts()"><h1><i role="blog"></i>{{#i18n}}blog.title{{/i18n}}</h1></a>
			<hr>
			<nav class="vertical">
				<div data-ng-repeat="blog in blogs">
					<section data-ng-class="{'fixed-block':true, 'cell':true,
							 'height-one':true, 'box':true, 'row':true, 
							 'selected':isSelected([[blog.id]])}">
						<div class="four cell fixed">
							<div class="fluid twelve cell">
								<img src="{{#static}}img/blog.png{{/static}}">
							</div>
						</div>
						<div class="eight cell fixed right-magnet text-container">
							<div class="row">
								<h3 data-ng-click="displayBlog([[blog.id]])">[[blog.title]]</h3>
							</div>
							<div class="row">
								<h4 data-ng-click="displayBlog([[blog.id]])">{{#i18n}}blog.by{{/i18n}} [[blog.author]]</h4>
							</div>
						</div>
					</section>
					<a data-ng-click="showEditBlog([[blog.id]])">{{#i18n}}blog.edit.blog{{/i18n}}</a><hr>
				</div>
				<h5><a data-ng-click="showCreateBlog()">{{#i18n}}blog.create.blog{{/i18n}}</a></h5>
			</nav>
		</div>
		<div class="eight cell">
			<nav class="contextual-buttons row">
				<div class="action-buttons">
					<a data-ng-click="showCreatePost()" class="button" data-ng-disabled="isCurrentView('createPost')" data-ng-if="isVisible()">
						<i role="add"></i>{{#i18n}}blog.create.post{{/i18n}}
					</a>
				</div>
			</nav>
			<hr>
			<h3 data-ng-if="isCurrentView('createBlog')">{{#i18n}}blog.create.title{{/i18n}}</h3>
			<h3 data-ng-if="isCurrentView('editBlog')">{{#i18n}}blog.edit.title{{/i18n}}</h3>
			<article class="text-container row">
				<section data-ng-include="currentView.path" class="text-container"></section>
				<section data-ng-repeat="post in currentBlog.posts" class="row">
					<div class="row">
						<h2 class="seven cell">[[post.title]]</h2>
						<a class="button right-magnet" data-ng-click="showEditPost([[post.id]])" data-ng-disabled="isCurrentView('editPost')">{{#i18n}}blog.edit.post{{/i18n}}</a>
						<a class="button right-magnet" data-ng-click="deletePost([[post.id]])">{{#i18n}}blog.delete.post{{/i18n}}</a>
					</div>
					<div class="row"><hr></div>
					<h5 class="row">
						{{#i18n}}blog.by{{/i18n}} [[post.author]] {{#i18n}}blog.on.date{{/i18n}} [[post.date]]
						<span data-ng-if="isCurrentView('lastPosts')">
							{{#i18n}}blog.on.blog{{/i18n}} <a data-ng-click="displayBlog([[post.blogid]])">[[post.blogname]]</a>
						</span>
					</h5>
					<p class="row">[[post.content]]</p>
					<div class="row" data-ng-if="true"><a class="button" data-ng-click="commentPost([[post.id]])">{{#i18n}}blog.comment.post{{/i18n}}</a></div>
					<hr class="solid">
				</section>
			</article>
		</div>
		<div class="clear"></div>
	</body>
</html>
