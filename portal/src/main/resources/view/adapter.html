<!doctype html>
<html>
<head>
	<script src="{{#infra}}js/loader.js{{/infra}}" type="text/javascript" id="context"></script>
	<script type="text/javascript">
		(function(){
			function Message(action, content){
				this.action = action;
				this.content = content;
			}

			var actions = {
				'get-theme': function(){

				},
				'get-me': function(){
					var message = new Message('')
				}
			};

			window.addEventListener('message', function(e) {
				var message = e.data;
				actions[e.data.action](e.data.content);
			});
		}());
	</script>
</head>
<body>

<portal>
	<iframe seamless id="adapter"></iframe>
</portal>
<script>
	if(window.location.href.split('#').length > 1){
		var appAddress = window.location.href.split('#')[1];
		if(appAddress.indexOf('?') !== -1){
			appAddress = appAddress + '&origin=' + window.location.href;
		}
		else{
			appAddress = appAddress + '?origin=' + window.location.href;
		}
		document.getElementById('adapter').setAttribute('src', appAddress);
	}
</script>
</body>
</html>